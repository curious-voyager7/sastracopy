<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Static Code Clipboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        /* Copying all styles from Clipboard.css */
        .clipboard-page {
            background-color: #f8f9fa;
            min-height: 100vh;
            padding-top: 20px;
        }

        .clipboard-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .clipboard-container h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }

        .notebook {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cell {
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .markdown-cell {
            background-color: #f8f9fa;
            padding: 10px 20px;
        }

        .markdown-content {
            font-weight: bold;
            font-size: 1.2rem;
            color: #2c3e50;
        }

        .code-cell {
            display: flex;
            flex-direction: column;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            background-color: #f1f1f1;
            border-bottom: 1px solid #e0e0e0;
        }

        .copy-button {
            display: flex;
            align-items: center;
            gap: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s ease;
        }

        .copy-button:hover {
            background-color: #45a049;
        }

        .copy-button.copied {
            background-color: #2196F3;
        }

        .code-content {
            background-color: #f8f8f8;
            padding: 15px;
            margin: 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .code-title {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
            padding: 5px 0;
        }

        /* Stealth mode styles */
        .clipboard-page.stealth-mode {
            background-color: white;
            color: white;
        }

        .clipboard-page.stealth-mode * {
            color: white !important;
            background-color: white !important;
            border-color: white !important;
            box-shadow: none !important;
            outline: none !important;
        }

        .stealth-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            z-index: 1000;
            animation: fadeInOut 2s ease-in-out;
            display: none;
        }

        @keyframes fadeInOut {
            0% { opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { opacity: 0; }
        }

        .clipboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stealth-toggle {
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="clipboard-page" id="clipboardPage">
        <div class="stealth-indicator" id="stealthIndicator">
            Stealth Mode: OFF
        </div>
        <div class="clipboard-container">
            <div class="clipboard-header">
                <h1>Static Code Clipboard</h1>
                <div class="stealth-toggle" id="stealthToggle">
                    <i class="fas fa-eye"></i>
                </div>
            </div>
            <div class="notebook" id="notebook">
                <!-- Content will be dynamically populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        const notebookData = [
            { type: 'markdown', content: '##A-Star' },
            { type: 'code', content: `def get(graph, a, b=None):
    links = graph.setdefault(a, {})
    if b is None:
        return links
    else:
        return links.get(b, float('inf'))

class Node:
    def __init__(self, name: str, parent=None):
        self.name = name
        self.parent = parent
        self.g = 0
        self.h = 0
        self.f = 0

    def __eq__(self, other):
        return self.name == other.name

    def __lt__(self, other):
        return self.f < other.f

    def __repr__(self):
        return f"({self.name}, {self.f})"

def add_to_open(open_list, neighbor):
    for node in open_list:
        if neighbor == node and neighbor.f >= node.f:
            return False
    return True

def astar_search(graph, heuristics, start, end):
    open_list = []
    closed_list = []
    start_node = Node(start, None)
    goal_node = Node(end, None)
    open_list.append(start_node)
    while len(open_list) > 0:
        open_list.sort()
        current_node = open_list.pop(0)
        closed_list.append(current_node)
        if current_node == goal_node:
            path = []
            while current_node is not None:
                path.append(f"{current_node.name}:{current_node.g}")
                current_node = current_node.parent
            return path[::-1]
        neighbors = graph.get(current_node.name, {})
        for key, value in neighbors.items():
            neighbor = Node(key, current_node)
            if neighbor in closed_list:
                continue
            neighbor.g = current_node.g + get(graph, current_node.name, neighbor.name)
            neighbor.h = heuristics.get(neighbor.name, float('inf'))
            neighbor.f = neighbor.g + neighbor.h
            if add_to_open(open_list, neighbor):
                open_list.append(neighbor)
    return None

def input_graph():
    graph = {}
    print("Enter edges in the format 'from to cost' (type 'done' to finish):")
    while True:
        line = input("Edge: ")
        if line.lower() == 'done':
            break
        u, v, w = line.split()
        w = int(w)
        graph.setdefault(u, {})[v] = w
    return graph

def input_heuristics():
    heuristics = {}
    print("Enter heuristic values in the format 'node cost' (type 'done' to finish):")
    while True:
        line = input("Heuristic: ")
        if line.lower() == 'done':
            break
        node, cost = line.split()
        heuristics[node] = int(cost)
    return heuristics

if __name__ == "__main__":
    graph = input_graph()
    heuristics = input_heuristics()
    start = input("Enter the start node: ")
    goal = input("Enter the goal node: ")
    path = astar_search(graph, heuristics, start, goal)
    if path:
        print("Path found:")
        print(" -> ".join(path))
    else:
        print("No path found between the given nodes.")` },
            { type: 'markdown', content: '##All Path Finder' },
            { type: 'code', content: `def all_paths(graph, start, end, path=[]):
    path = path + [start]
    if start == end:
        return [path]
    if start not in graph:
        return []
    paths = []
    for node in graph[start]:
        if node not in path:
            new_paths = all_paths(graph, node, end, path)
            for new_path in new_paths:
                paths.append(new_path)
    return paths

def input_graph():
    graph = {}
    print("Enter the graph (enter 'done' when finished):")
    while True:
        node = input("Enter a node (or 'done' to finish): ")
        if node.lower() == 'done':
            break
        connections = input(f"Enter connections from node {node} (comma-separated): ").split(',')
        connections = [c.strip() for c in connections if c.strip()]
        graph[node] = connections
    return graph

print("Graph Path Finder")
graph = input_graph()
start_node = input("Enter the start node: ")
end_node = input("Enter the end node: ")
result_paths = all_paths(graph, start_node, end_node)
print(f"\nAll paths from {start_node} to {end_node}:")
if not result_paths:
    print("No paths found")
else:
    for i, path in enumerate(result_paths, 1):
        print(f"{i}. {path}")` },
            { type: 'markdown', content: '##Alpha-Beta' },
            { type: 'code', content: `import math
nodes_visited = []
MAX, MIN = 1000, -1000

def minimax(cur_depth, node_index, max_turn, scores, target_depth, b_factor, alpha, beta):
    if cur_depth == target_depth:
        return scores[node_index]
    if max_turn:
        largest = None
        for i in range(b_factor):
            index = node_index * b_factor + i
            if index >= len(scores):
                continue
            cur = minimax(cur_depth + 1, index, False, scores, target_depth, b_factor, alpha, beta)
            if largest is None or cur > largest:
                largest = cur
            alpha = max(alpha, largest)
            nodes_visited.append(cur)
            if beta <= alpha:
                break
        return largest
    else:
        smallest = None
        for i in range(b_factor):
            index = node_index * b_factor + i
            if index >= len(scores):
                continue
            cur = minimax(cur_depth + 1, index, True, scores, target_depth, b_factor, alpha, beta)
            if smallest is None or cur < smallest:
                smallest = cur
            beta = min(beta, smallest)
            nodes_visited.append(cur)
            if beta <= alpha:
                break
        return smallest

scores = [int(s) for s in input("Enter the scores: ").split()]
b_factor = int(input("Enter the branching factor: "))
player = int(input("Maximizer or minimizer? (Enter 1 for maximizer and 0 for minimizer): "))
tree_depth = math.ceil(math.log(len(scores), b_factor))
print("The optimal value is:", end="")
print(minimax(0, 0, player, scores, tree_depth, b_factor, MIN, MAX))
diff = []
for i in scores:
    if i not in nodes_visited:
        diff.append(i)
if not diff:
    print("No nodes were pruned")
else:
    print("Pruned nodes are:")
    for i in diff:
        print(i, sep='')` },
        ];

        let stealthMode = true; // Changed to true for default stealth mode
        let expandedCodes = {};
        let copiedIndex = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            stealthMode = true;
            renderNotebook();
            setupKeyboardShortcuts();
            setupStealthToggle();
            // Force enable stealth mode by default
            const page = document.getElementById('clipboardPage');
            page.classList.add('stealth-mode');
            const icon = document.querySelector('#stealthToggle i');
            icon.className = 'fas fa-eye-slash';
        });

        function renderNotebook() {
            const notebookElement = document.getElementById('notebook');
            notebookElement.innerHTML = notebookData.map((cell, index) => 
                `<div class="cell ${cell.type}-cell">
                    ${cell.type === 'markdown' 
                        ? `<div class="markdown-content">${cell.content}</div>`
                        : `<div class="code-cell">
                            <div class="code-header">
                                <div class="code-title" onclick="toggleCodeExpansion(${index})">
                                    <i class="fas fa-${expandedCodes[index] ? 'chevron-down' : 'chevron-right'}"></i>
                                    <span>Python</span>
                                </div>
                                <button class="copy-button" data-index="${index}">
                                    <i class="fas fa-copy"></i>
                                    Copy
                                </button>
                            </div>
                            ${expandedCodes[index] ? `
                                <pre class="code-content"><code>${cell.content}</code></pre>
                            ` : ''}
                        </div>`
                    }
                </div>`
            ).join('');

            // Add click event listeners to copy buttons
            document.querySelectorAll('.copy-button').forEach(button => {
                button.addEventListener('click', function() {
                    const index = parseInt(this.dataset.index);
                    const content = notebookData[index].content;
                    copyToClipboard(encodeURIComponent(content), this);
                });
            });
        }

        async function copyToClipboard(encodedText, buttonElement) {
            if (!buttonElement) {
                console.error('Button element not found');
                return;
            }

            const text = decodeURIComponent(encodedText);
            let success = false;

            try {
                // Method 1: Modern Clipboard API
                if (navigator.clipboard && window.isSecureContext) {
                    await navigator.clipboard.writeText(text);
                    success = true;
                }

                // Method 2: execCommand with textarea
                if (!success) {
                    const textArea = document.createElement('textarea');
                    textArea.value = text;
                    textArea.style.position = 'fixed';
                    textArea.style.opacity = '0';
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    
                    try {
                        success = document.execCommand('copy');
                    } catch (err) {
                        console.error('execCommand failed:', err);
                    }
                    document.body.removeChild(textArea);
                }

                // Method 3: Fallback to manual copy
                if (!success) {
                    const response = window.prompt('Copy failed. Please copy the text manually:', text);
                    success = response !== null;
                }

                // Update button state
                if (success) {
                    const originalContent = buttonElement.innerHTML;
                    buttonElement.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    buttonElement.classList.add('copied');
                    
                    setTimeout(() => {
                        buttonElement.innerHTML = originalContent;
                        buttonElement.classList.remove('copied');
                    }, 2000);
                }
            } catch (err) {
                console.error('Copy failed:', err);
                window.prompt('Automatic copy failed. Please copy the text manually:', text);
            }
        }

        function toggleCodeExpansion(index) {
            expandedCodes[index] = !expandedCodes[index];
            renderNotebook();
        }

        function toggleStealthMode() {
            stealthMode = !stealthMode;
            document.getElementById('clipboardPage').classList.toggle('stealth-mode');
            const indicator = document.getElementById('stealthIndicator');
            indicator.textContent = `Stealth Mode: ${stealthMode ? 'ON' : 'OFF'}`;
            indicator.style.display = 'block';
            setTimeout(() => {
                indicator.style.display = 'none';
            }, 2000);
            
            const icon = document.querySelector('#stealthToggle i');
            icon.className = stealthMode ? 'fas fa-eye-slash' : 'fas fa-eye';
        }

        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', (e) => {
                if (e.ctrlKey && e.shiftKey && e.key === 'Q') {
                    toggleStealthMode();
                }
            });
        }

        function setupStealthToggle() {
            document.getElementById('stealthToggle').addEventListener('click', toggleStealthMode);
        }
    </script>
</body>
</html>